Teradata Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- if command test
--------------------------------------------------------------------------
.run ../common/sqlite_setup.sql
-- Running script: ../common/sqlite_setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.open sqlite::memory:
-- 0/2 - 0 ----------------------------------------------------------------

CREATE TABLE MyTable (a INTEGER, b INTEGER);
-- success. update count = 0
-- 1/2 - 0 ----------------------------------------------------------------

-- basic if test
SELECT * FROM MyTable ORDER BY a;
-- success --
         a          b
---------- ----------
-- activity count = 0
-- 2/2 - 0 ----------------------------------------------------------------
.if activityCount == 0
-- 2/3 - 0 ----------------------------------------------------------------
.rem Test
-- 2/4 - 0 ----------------------------------------------------------------
SELECT 1;
-- success --
         1
----------
         1
-- activity count = 1
-- 3/4 - 0 ----------------------------------------------------------------
.rem Test
-- 3/5 - 0 ----------------------------------------------------------------
.end if
-- 3/5 - 0 ----------------------------------------------------------------

INSERT INTO MyTable VALUES (1, 1);
-- success. update count = 1
-- 4/5 - 0 ----------------------------------------------------------------

SELECT * FROM MyTable ORDER BY a;
-- success --
         a          b
---------- ----------
         1          1
-- activity count = 1
-- 5/5 - 0 ----------------------------------------------------------------
.if activityCount == 0
-- skip: .rem Test
-- skip: SELECT 2;
-- skip: .rem Test
.end if
-- 5/6 - 0 ----------------------------------------------------------------

-- nested ifs

SELECT 3 AS Test;
-- success --
      Test
----------
         3
-- activity count = 1
-- 6/6 - 0 ----------------------------------------------------------------
.if activityCount == 1
-- 6/7 - 0 ----------------------------------------------------------------
.if activityCount == 0
-- skip: SELECT 4;
.end if
-- 6/8 - 0 ----------------------------------------------------------------
.if activityCount == 1
-- 6/9 - 0 ----------------------------------------------------------------
SELECT 5;
-- success --
         5
----------
         5
-- activity count = 1
-- 7/9 - 0 ----------------------------------------------------------------
.end if
-- 7/9 - 0 ----------------------------------------------------------------
.end if
-- 7/9 - 0 ----------------------------------------------------------------

SELECT 6;
-- success --
         6
----------
         6
-- activity count = 1
-- 8/9 - 0 ----------------------------------------------------------------

-- invalid if condition
.if asdf + asdf
-- error: ReferenceError: "asdf" is not defined in <eval> at line number 1
-- error: invalid condition
-- skip: SELECT 7;
.end if
-- 8/10 - 0 ---------------------------------------------------------------

.if activityCount
-- error: java.lang.Long cannot be cast to java.lang.Boolean
-- error: invalid condition
-- skip: SELECT 8;
.end if
-- 8/11 - 0 ---------------------------------------------------------------
