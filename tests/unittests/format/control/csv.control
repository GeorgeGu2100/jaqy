Teradata Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- .format csv test
--------------------------------------------------------------------------
.run ../common/sqlite_setup.sql
-- Running script: ../common/sqlite_setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.open sqlite::memory:
-- 0/2 - 0 ----------------------------------------------------------------

CREATE TABLE MyTable(a INTEGER PRIMARY KEY, b VARCHAR(200), c VARCHAR(200));
-- success. update count = 0
-- 1/2 - 0 ----------------------------------------------------------------

INSERT INTO MyTable VALUES (1, 'abc', 'def');
-- success. update count = 1
-- 2/2 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (2, 'john', 'doe');
-- success. update count = 1
-- 3/2 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (3, 'a"b', 'c"d');
-- success. update count = 1
-- 4/2 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (4, 'a,b', 'c,d');
-- success. update count = 1
-- 5/2 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (5, 'a''b', 'c''d');
-- success. update count = 1
-- 6/2 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (6, 'a''",b', 'c''",d');
-- success. update count = 1
-- 7/2 - 0 ----------------------------------------------------------------
INSERT INTO MyTable VALUES (7, 'a	b', 'c,d');
-- success. update count = 1
-- 8/2 - 0 ----------------------------------------------------------------

.format csv -d asdf
-- error: invalid delimiter: asdf
-- 8/3 - 0 ----------------------------------------------------------------

.format csv
-- 8/4 - 0 ----------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a,b,c
1,abc,def
2,john,doe
3,"a""b","c""d"
4,"a,b","c,d"
5,a'b,c'd
6,"a'"",b","c'"",d"
7,a	b,"c,d"
-- activity count = 7
-- 9/4 - 0 ----------------------------------------------------------------
.format csv -type default
-- 9/5 - 0 ----------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a,b,c
1,abc,def
2,john,doe
3,"a""b","c""d"
4,"a,b","c,d"
5,a'b,c'd
6,"a'"",b","c'"",d"
7,a	b,"c,d"
-- activity count = 7
-- 10/5 - 0 ---------------------------------------------------------------
.format csv -type default -d |
-- 10/6 - 0 ---------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a|b|c
1|abc|def
2|john|doe
3|"a""b"|"c""d"
4|a,b|c,d
5|a'b|c'd
6|"a'"",b"|"c'"",d"
7|a	b|c,d
-- activity count = 7
-- 11/6 - 0 ---------------------------------------------------------------
.format csv -d |
-- 11/7 - 0 ---------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a|b|c
1|abc|def
2|john|doe
3|"a""b"|"c""d"
4|a,b|c,d
5|a'b|c'd
6|"a'"",b"|"c'"",d"
7|a	b|c,d
-- activity count = 7
-- 12/7 - 0 ---------------------------------------------------------------
.format csv -type excel
-- 12/8 - 0 ---------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a,b,c
1,abc,def
2,john,doe
3,"a""b","c""d"
4,"a,b","c,d"
5,a'b,c'd
6,"a'"",b","c'"",d"
7,a	b,"c,d"
-- activity count = 7
-- 13/8 - 0 ---------------------------------------------------------------
.format csv -type rfc4180
-- 13/9 - 0 ---------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a,b,c
1,abc,def
2,john,doe
3,"a""b","c""d"
4,"a,b","c,d"
5,a'b,c'd
6,"a'"",b","c'"",d"
7,a	b,"c,d"
-- activity count = 7
-- 14/9 - 0 ---------------------------------------------------------------
.format csv -type mysql
-- 14/10 - 0 --------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a	b	c
1	abc	def
2	john	doe
3	a"b	c"d
4	a,b	c,d
5	a'b	c'd
6	a'",b	c'",d
7	a\	b	c,d
-- activity count = 7
-- 15/10 - 0 --------------------------------------------------------------
.format csv -type tdf
-- 15/11 - 0 --------------------------------------------------------------
SELECT * FROM MyTable ORDER BY a;
-- success --
a	b	c
1	abc	def
2	john	doe
3	"a""b"	"c""d"
4	a,b	c,d
5	a'b	c'd
6	"a'"",b"	"c'"",d"
7	"a	b"	c,d
-- activity count = 7
-- 16/11 - 0 --------------------------------------------------------------

.format csv -type dummy
-- error: unknown csv format: dummy
-- 16/12 - 0 --------------------------------------------------------------

DROP TABLE MyTable;
-- success. update count = 1
-- 17/12 - 0 --------------------------------------------------------------
.close
Session 0 is now closed.
-- 17/13 - 0 --------------------------------------------------------------

