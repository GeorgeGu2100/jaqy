Teradata Jaqy Console 1.0
-- 0/0 - 0 ----------------------------------------------------------------
--------------------------------------------------------------------------
-- test PostgreSQL various array data types
--------------------------------------------------------------------------
.run ../common/postgresql_setup.sql
-- Running script: ../common/postgresql_setup.sql
-- 0/1 - 0 ----------------------------------------------------------------
.open -u postgres postgresql://localhost/?stringtype=unspecified
-- 0/2 - 0 ----------------------------------------------------------------
.debug preparedstatement on
-- 0/3 - 0 ----------------------------------------------------------------

CREATE TABLE NumTable
(
	a  INTEGER,
	c1 SMALLINT[],
	c2 INTEGER[],
	c3 BIGINT[],
	c4 FLOAT[],
	c5 DOUBLE PRECISION[]
);
-- success. update count = 0
-- 1/3 - 0 ----------------------------------------------------------------

INSERT INTO NumTable VALUES (1, '{-12345}', '{-123456789}', '{-1234567890}', '{-1234.5}', '{-4.5e15}');
-- success. update count = 1
-- 2/3 - 0 ----------------------------------------------------------------
INSERT INTO NumTable VALUES (2, '{12345}', '{123456789}', '{1234567890}', '{1234.5}', '{4.5e15}');
-- success. update count = 1
-- 3/3 - 0 ----------------------------------------------------------------

.export json t.json
-- 3/4 - 0 ----------------------------------------------------------------
SELECT * FROM NumTable ORDER BY a;
-- success --
-- activity count = 2
-- 4/4 - 0 ----------------------------------------------------------------
DELETE FROM NumTable;
-- success. update count = 2
-- 5/4 - 0 ----------------------------------------------------------------
.import json t.json
-- 5/5 - 0 ----------------------------------------------------------------
INSERT INTO NumTable VALUES ({{a}}, {{c1}}, {{c2}}, {{c3}}, {{c4}}, {{c5}});
Parameter Count                              6
  Index                                        1
    Type                                         INTEGER
    SQL Type                                     int4
    Java Class                                   java.lang.Integer
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        2
    Type                                         ARRAY
    SQL Type                                     _int2
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        3
    Type                                         ARRAY
    SQL Type                                     _int4
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        4
    Type                                         ARRAY
    SQL Type                                     _int8
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        5
    Type                                         ARRAY
    SQL Type                                     _float8
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        6
    Type                                         ARRAY
    SQL Type                                     _float8
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
-- 6/5 - 0 ----------------------------------------------------------------
SELECT * FROM NumTable ORDER BY a;
-- success --
a c1       c2           c3            c4        c5
- -------- ------------ ------------- --------- -------------------
1 {-12345} {-123456789} {-1234567890} {-1234.5} {-4500000000000000}
2 {12345}  {123456789}  {1234567890}  {1234.5}  {4500000000000000}
-- activity count = 2
-- 7/5 - 0 ----------------------------------------------------------------

DROP TABLE NumTable;
-- success. update count = 0
-- 8/5 - 0 ----------------------------------------------------------------

CREATE TABLE DecTable
(
	a  INTEGER,
	c1 DECIMAL(3,2)[],
	c2 DECIMAL(9,2)[],
	c3 DECIMAL(22,2)[],
	c4 DECIMAL(31,2)[]
);
-- success. update count = 0
-- 9/5 - 0 ----------------------------------------------------------------
INSERT INTO DecTable VALUES (1, '{-1.23}', '{-1234567.89}', '{-12345678901234567890.12}', '{-12345678901234567890123456789.01}');
-- success. update count = 1
-- 10/5 - 0 ---------------------------------------------------------------
INSERT INTO DecTable VALUES (2, '{1.23}', '{1234567.89}', '{12345678901234567890.12}', '{12345678901234567890123456789.01}');
-- success. update count = 1
-- 11/5 - 0 ---------------------------------------------------------------

.export json t.json
-- 11/6 - 0 ---------------------------------------------------------------
SELECT * FROM DecTable ORDER BY a;
-- success --
-- activity count = 2
-- 12/6 - 0 ---------------------------------------------------------------
DELETE FROM DecTable;
-- success. update count = 2
-- 13/6 - 0 ---------------------------------------------------------------
.import json t.json
-- 13/7 - 0 ---------------------------------------------------------------
INSERT INTO DecTable VALUES ({{a}}, {{c1}}, {{c2}}, {{c3}}, {{c4}});
Parameter Count                              5
  Index                                        1
    Type                                         INTEGER
    SQL Type                                     int4
    Java Class                                   java.lang.Integer
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        2
    Type                                         ARRAY
    SQL Type                                     _numeric
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        3
    Type                                         ARRAY
    SQL Type                                     _numeric
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        4
    Type                                         ARRAY
    SQL Type                                     _numeric
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        5
    Type                                         ARRAY
    SQL Type                                     _numeric
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
-- 14/7 - 0 ---------------------------------------------------------------
SELECT * FROM DecTable ORDER BY a;
-- success --
a c1      c2            c3                         c4
- ------- ------------- -------------------------- -----------------------------------
1 {-1.23} {-1234567.89} {-12345678901234567890.12} {-12345678901234567890123456789.01}
2 {1.23}  {1234567.89}  {12345678901234567890.12}  {12345678901234567890123456789.01}
-- activity count = 2
-- 15/7 - 0 ---------------------------------------------------------------

DROP TABLE DecTable;
-- success. update count = 0
-- 16/7 - 0 ---------------------------------------------------------------

CREATE TABLE StrTable
(
	a  INTEGER,
	c1 VARCHAR(255)[],
	c2 CHAR(1)[],
	c3 CHAR(5)[],
	c4 TEXT[]
);
-- success. update count = 0
-- 17/7 - 0 ---------------------------------------------------------------

INSERT INTO StrTable VALUES (1, '{aa}', '{A}', '{abcde}', '{aaaaa}');
-- success. update count = 1
-- 18/7 - 0 ---------------------------------------------------------------
INSERT INTO StrTable VALUES (2, '{bbb}', '{B}', '{fghij}', '{bbbbb}');
-- success. update count = 1
-- 19/7 - 0 ---------------------------------------------------------------

.export json t.json
-- 19/8 - 0 ---------------------------------------------------------------
SELECT * FROM StrTable ORDER BY a;
-- success --
-- activity count = 2
-- 20/8 - 0 ---------------------------------------------------------------
DELETE FROM StrTable;
-- success. update count = 2
-- 21/8 - 0 ---------------------------------------------------------------
.import json t.json
-- 21/9 - 0 ---------------------------------------------------------------
INSERT INTO StrTable VALUES ({{a}}, {{c1}}, {{c2}}, {{c3}}, {{c4}});
Parameter Count                              5
  Index                                        1
    Type                                         INTEGER
    SQL Type                                     int4
    Java Class                                   java.lang.Integer
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        2
    Type                                         ARRAY
    SQL Type                                     _varchar
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        3
    Type                                         ARRAY
    SQL Type                                     _bpchar
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        4
    Type                                         ARRAY
    SQL Type                                     _bpchar
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        5
    Type                                         ARRAY
    SQL Type                                     _text
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
-- 22/9 - 0 ---------------------------------------------------------------
SELECT * FROM StrTable ORDER BY a;
-- success --
a c1    c2 c3      c4
- ----- -- ------- -------
1 {aa}  {A {abcde} {aaaaa}
2 {bbb} {B {fghij} {bbbbb}
-- activity count = 2
-- 23/9 - 0 ---------------------------------------------------------------

DROP TABLE StrTable;
-- success. update count = 0
-- 24/9 - 0 ---------------------------------------------------------------

CREATE TABLE BinTable
(
	a  INTEGER,
	c1 BYTEA[]
);
-- success. update count = 0
-- 25/9 - 0 ---------------------------------------------------------------

INSERT INTO BinTable VALUES (1, '{\\xdeadbeef}');
-- success. update count = 1
-- 26/9 - 0 ---------------------------------------------------------------
INSERT INTO BinTable VALUES (2, '{\\xfacefeed}');
-- success. update count = 1
-- 27/9 - 0 ---------------------------------------------------------------

.export json t.json
-- 27/10 - 0 --------------------------------------------------------------
SELECT * FROM BinTable ORDER BY a;
-- success --
-- activity count = 2
-- 28/10 - 0 --------------------------------------------------------------
DELETE FROM BinTable;
-- success. update count = 2
-- 29/10 - 0 --------------------------------------------------------------
.import json t.json
-- 29/11 - 0 --------------------------------------------------------------
INSERT INTO BinTable VALUES ({{a}}, {{c1}});
Parameter Count                              2
  Index                                        1
    Type                                         INTEGER
    SQL Type                                     int4
    Java Class                                   java.lang.Integer
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        2
    Type                                         ARRAY
    SQL Type                                     _bytea
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
-- 30/11 - 0 --------------------------------------------------------------
SELECT * FROM BinTable ORDER BY a;
-- success --
a c1
- -----------------------
1 {"\\x3371322b37773d3d"}
2 {"\\x2b73372b37513d3d"}
-- activity count = 2
-- 31/11 - 0 --------------------------------------------------------------

DROP TABLE BinTable;
-- success. update count = 0
-- 32/11 - 0 --------------------------------------------------------------

CREATE TABLE TimeTable
(
	a  INTEGER,
	c1 DATE[],
	c2 TIME[],
	c3 TIME WITH TIME ZONE[],
	c4 TIMESTAMP[],
	c5 TIMESTAMP WITH TIME ZONE[]
);
-- success. update count = 0
-- 33/11 - 0 --------------------------------------------------------------

INSERT INTO TimeTable VALUES (1, '{2001-02-03}', '{12:34:56}', '{12:34:56-08:00}', '{2001-02-03 12:34:56}', '{2001-02-03 12:34:56-08:00}');
-- success. update count = 1
-- 34/11 - 0 --------------------------------------------------------------
INSERT INTO TimeTable VALUES (2, '{2001-03-04}', '{12:34:56}', '{12:34:56+08:00}', '{2001-03-04 12:34:56}', '{2001-02-03 12:34:56+08:00}');
-- success. update count = 1
-- 35/11 - 0 --------------------------------------------------------------

.export json t.json
-- 35/12 - 0 --------------------------------------------------------------
SELECT * FROM TimeTable ORDER BY a;
-- success --
-- activity count = 2
-- 36/12 - 0 --------------------------------------------------------------
DELETE FROM TimeTable;
-- success. update count = 2
-- 37/12 - 0 --------------------------------------------------------------
.import json t.json
-- 37/13 - 0 --------------------------------------------------------------
INSERT INTO TimeTable VALUES ({{a}}, {{c1}}, {{c2}}, {{c3}}, {{c4}}, {{c5}});
Parameter Count                              6
  Index                                        1
    Type                                         INTEGER
    SQL Type                                     int4
    Java Class                                   java.lang.Integer
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       Y
    Mode                                         IN
  Index                                        2
    Type                                         ARRAY
    SQL Type                                     _date
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        3
    Type                                         ARRAY
    SQL Type                                     _time
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        4
    Type                                         ARRAY
    SQL Type                                     _timetz
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        5
    Type                                         ARRAY
    SQL Type                                     _timestamp
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
  Index                                        6
    Type                                         ARRAY
    SQL Type                                     _timestamptz
    Java Class                                   java.sql.Array
    Precision                                    0
    Scale                                        0
    Nullable                                     2
    Signed                                       N
    Mode                                         IN
-- 38/13 - 0 --------------------------------------------------------------
SELECT * FROM TimeTable ORDER BY a;
-- success --
a c1           c2         c3            c4                      c5
- ------------ ---------- ------------- ----------------------- --------------------------
1 {2001-02-03} {12:34:56} {20:34:56+00} {"2001-02-03 12:34:56"} {"2001-02-03 20:34:56+00"}
2 {2001-03-04} {12:34:56} {04:34:56+00} {"2001-03-04 12:34:56"} {"2001-02-03 04:34:56+00"}
-- activity count = 2
-- 39/13 - 0 --------------------------------------------------------------

.os rm -f t.json
-- 39/14 - 0 --------------------------------------------------------------
DROP TABLE TimeTable;
-- success. update count = 0
-- 40/14 - 0 --------------------------------------------------------------
.close
Session 0 is now closed.
-- 40/15 - 0 --------------------------------------------------------------
